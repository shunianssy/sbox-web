<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <!-- åœ¨ head ä¸­æå‰è¿è¡Œè„šæœ¬ï¼Œé˜²æ­¢ FOUC -->
    <script>
        // ç«‹å³è¯»å–ä¸»é¢˜ï¼Œé¿å…é—ªçƒ
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'dark'; // é»˜è®¤ dark
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>

    <style>
        /* æ‚¬æµ®å±•ç¤ºæ¡†é€šç”¨æ ·å¼ */
        :root {
            --bg-color: #fff;
            --text-color: #333;
            --border-color: #ddd;
            --link-color: #4a90e2;
        }

        [data-theme="light"] {
            --bg-color: #fff;
            --text-color: #333;
            --border-color: #ddd;
            --link-color: #4a90e2;
        }

        [data-theme="dark"] {
            --bg-color: #2d2d2d;
            --text-color: #e0e0e0;
            --border-color: #555;
            --link-color: #6cbaff;
        }

        body {
            margin: 0;
            background: var(--bg-color);
            color: var(--text-color);
            font-family: Arial, sans-serif;
            transition: background 0.3s ease; /* å¹³æ»‘èƒŒæ™¯è¿‡æ¸¡ */
        }

        /* æ‚¬æµ®æ¡†æ ·å¼ */
        .floating-box {
            position: fixed;
            width: 280px;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 16px;
            font-family: Arial, sans-serif;
            color: var(--text-color);
            transition: transform 0.2s, box-shadow 0.2s, opacity 0.3s ease;
            z-index: 1000;
            cursor: default;
            user-select: none;
            box-sizing: border-box;
            opacity: 1;
            overflow: hidden;
        }

        .floating-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }

        .floating-box h3 {
            margin: 0 0 10px;
            font-size: 1.1em;
            color: var(--link-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 6px;
            position: relative;
        }

        .floating-box p {
            margin: 8px 0;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .floating-box a {
            color: var(--link-color);
            text-decoration: none;
        }

        .floating-box a:hover {
            text-decoration: underline;
        }

        /* ä½ç½®å¸ƒå±€ */
        .floating-box-1 {
            bottom: 30px;
            right: 30px;
        }

        .floating-box-2 {
            bottom: 100px;
            right: 50px;
        }

        .floating-box-3 {
            bottom: 170px;
            right: 70px;
        }

        /* å…³é—­æŒ‰é’® */
        .close-btn {
            position: absolute;
            top: 6px;
            right: 8px;
            background: none;
            border: none;
            font-size: 1.2em;
            color: #999;
            cursor: pointer;
            opacity: 0.7;
            line-height: 1;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .close-btn:hover {
            color: #ff4d4f;
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
            opacity: 1;
        }

        [data-theme="dark"] .close-btn {
            color: #aaa;
        }

        [data-theme="dark"] .close-btn:hover {
            color: #ff6b6b;
            background: rgba(0, 0, 0, 0.3);
        }

        /* æ¨èæ¿å— */
        .recommend-sections {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            padding: 0 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .recommend-card {
            flex: 1;
            min-width: 280px;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .recommend-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        }

        .recommend-card h3 {
            margin: 0 0 12px;
            font-size: 1.1em;
            color: var(--link-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 6px;
        }

        .recommend-card ul {
            margin: 8px 0;
            padding-left: 18px;
        }

        .recommend-card li {
            margin: 6px 0;
            font-size: 0.95em;
            line-height: 1.5;
            color: var(--text-color);
        }

        .recommend-card a {
            color: var(--link-color);
            text-decoration: none;
        }

        .recommend-card a:hover {
            text-decoration: underline;
        }

        .theme-toggle {
            background: none;
            border: none;
            font-size: 1.2em;
            cursor: pointer;
            color: var(--text-color);
        }

        footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            background: var(--bg-color);
            border-top: 1px solid var(--border-color);
            font-size: 0.9em;
            color: var(--text-color);
        }
    </style>
</head>
<body>

    <nav>
        <div class="menu-icon2"><a href="/" style="color: black;">ä¹¦é˜</a></div>
        <div class="toolbox">
            {{ nav|safe }}
        </div>
    </nav>
    </section>

    <h2 style="text-align: center; margin-top: 30px;">ä¼˜ç§€ä½œå“å–µ~</h2>

    <!-- æ¨èä½œå“æ¿å— -->
    <div class="recommend-sections">
        <div class="recommend-card">
            <h3>ğŸ“š éšæœºæ¨è</h3>
            <ul>
                <li><a href="/book/{{ bookid }}">{{ book }}</a></li>
                <li><a href="/book/{{ bookid2 }}">{{ book2 }}</a></li>
                <li><a href="/book/{{ bookid3 }}">{{ book3 }}</a></li>
                <li><a href="/book/{{ bookid4 }}">{{ book4 }}</a></li>
                <li><a href="/book/{{ bookid5 }}">{{ book5 }}</a></li>
                <li><a href="/book/{{ bookid6 }}">{{ book6 }}</a></li>
                <li><a href="/book/{{ bookid7 }}">{{ book7 }}</a></li>
                <li><a href="/book/{{ bookid8 }}">{{ book8 }}</a></li>
                <li><a href="/book/{{ bookid9 }}">{{ book9 }}</a></li>
                <li><a href="/book/{{ bookid10 }}">{{ book10 }}</a></li>
            </ul>
        </div>

        <div class="recommend-card">
            <h3>ğŸ“– å°è¯´æ¨è</h3>
            <ul>
                <li><a href="/Novel/{{ Novelid }}">{{ Novel }}</a></li>
                <li><a href="/Novel/{{ Novelid2 }}">{{ Novel2 }}</a></li>
                <li><a href="/Novel/{{ Novelid3 }}">{{ Novel3 }}</a></li>
                <li><a href="/Novel/{{ Novelid8 }}">{{ Novel8 }}</a></li>
                <li><a href="/Novel/{{ Novelid4 }}">{{ Novel4 }}</a></li>
                <li><a href="/Novel/{{ Novelid5 }}">{{ Novel5 }}</a></li>
                <li><a href="/Novel/{{ Novelid6 }}">{{ Novel6 }}</a></li>
                <li><a href="/Novel/{{ Novelid7 }}">{{ Novel7 }}</a></li>
                <li><a href="/Novel/{{ Novelid9 }}">{{ Novel9 }}</a></li>
                <li><a href="/Novel/{{ Novelid10 }}">{{ Novel10 }}</a></li>
            </ul>
        </div>

        <div class="recommend-card">
            <h3>ğŸ” æ‚¬ç–‘çƒ§è„‘</h3>
            <ul>
                <li><a href="/book/105">ã€Šå¯†å®¤æ— è§£ã€‹</a></li>
                <li><a href="/book/109">ã€Šè®°å¿†æ®‹ç‰‡ã€‹</a></li>
                <li><a href="/book/115">ã€Šå€’å¸¦ä¸ƒåäºŒå°æ—¶ã€‹</a></li>
            </ul>
        </div>
    </div>


    <footer>
        {{ footer|safe }}
    </footer>

    <script>
        function toggleDropdown() {
            const dropdown = document.querySelector('.dropdown');
            dropdown.classList.toggle('open');
        }

        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // å…³é—­æ‚¬æµ®æ¡†ï¼ˆå¸¦æ·¡å‡ºåŠ¨ç”»ï¼‰
        function closeBox(boxId) {
            const box = document.getElementById(boxId);
            if (box) {
                box.style.opacity = '0';
                box.style.pointerEvents = 'none';
                setTimeout(() => {
                    box.style.display = 'none';
                    localStorage.setItem(`floatingBox_${boxId}`, 'hidden');
                }, 300);
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ¢å¤æ‚¬æµ®æ¡†çŠ¶æ€
        document.addEventListener('DOMContentLoaded', () => {
            ['box1'].forEach(id => {  // å¯æ‰©å±• box2, box3
                const box = document.getElementById(id);
                if (box) {
                    const isHidden = localStorage.getItem(`floatingBox_${id}`);
                    if (isHidden === 'hidden') {
                        box.style.display = 'none';
                    }
                }
            });
        });

        // ç‚¹å‡»å¤–éƒ¨å…³é—­ä¸‹æ‹‰èœå•
        document.addEventListener('click', function (event) {
            const dropdown = document.querySelector('.dropdown');
            if (!dropdown.contains(event.target)) {
                dropdown.classList.remove('open');
            }
        });

        console.info('åŠ è½½æˆåŠŸï¼Œå°ç›’å­ç‰ˆæœ¬å·ï¼š1.7.6');
        console.info('å‰ç«¯å·²æ›´æ–°ï¼šé˜²æ­¢é—ªçƒ + å¹³æ»‘ä¸»é¢˜åˆ‡æ¢');
    </script>
</body>
</html>